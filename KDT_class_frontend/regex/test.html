<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"> -->
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <title>Document</title>

    <style>
        * {
            box-sizing: border-box;

        }

        h3 {
            text-align: center;
        }

        fieldset {
            border-radius: 10px;
            margin: 10px;
        }

        input {
            margin: 2px;
            width: 100%;
            height: 30px;
        }

        #addresstext1 {
            width: 80%;
        }

        #btn1 {

            width: 16.2%;
            background-color: rgb(101, 101, 255);
            color: white;
            border: 0px;
            border-radius: 5px;
        }

        #btn2 {
            width: 94.5%;
            padding: 0px;
            background-color: rgb(101, 101, 255);
            color: white;
            border: 0px;
            border-radius: 5px;

            margin-left: 10px;

        }
    </style>
</head>

<body>

    <h3>회원가입</h1>
        <form action="success.html" id="frm">
            <fieldset>
                <legend>계정 정보</legend>
                <div>
                    <div>
                        <input type="text" placeholder="아이디" id="idtext">
                    </div>
                    <div>
                        <input type="text" placeholder="패스워드" id="pwtext">
                    </div>
                    <div>

                        <input type="text" placeholder="패스워드 확인" id="pwchtext">
                    </div>
                </div>

            </fieldset>
            <fieldset>
                <legend>개인 정보</legend>
                <div>

                    <input type="text" placeholder="이름" id="nametext">
                </div>
                <div>

                    <input type="text" placeholder="이메일" id="emailtext">
                </div>
            </fieldset>
            <fieldset>
                <legend>주소 정보</legend>
                <div>
                    <input type="text" placeholder="우편번호" readonly id="addresstext1">
                    <input type="button" value="검색" id="btn1">
                </div>
                <div>

                    <input type="text" placeholder="주소1" id="addresstext2">
                </div>
                <div>

                    <input type="text" placeholder="주소2">
                </div>
            </fieldset>

            <input type="submit" id="btn2" value="가입하기">
        </form>
        <script>
            let idregex = /^[a-z\d_]{4,12}$/;
            let pwregex = /^[!-~]{8,16}$/;

            let nameregex = /^[가-힣]{2,6}$/;
            let emailregex = /^[A-Za-z\d]{4,12}@[\w]{4,12}((\.com)|(\.co\.kr))$/;

            let addresstext1 = document.getElementById("addresstext1");
            let addresstext2 = document.getElementById("addresstext2");
            let post = new daum.Postcode({
                oncomplete: function (data) {
                    // 팝업에서 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분입니다.
                    // 예제를 참고하여 다양한 활용법을 확인해 보세요.

                    addresstext1.value = data.zonecode;
                    addresstext2.value = data.address;
                }
            })


            let btn1 = document.getElementById("btn1");

            btn1.onclick = function () {
                post.open();
            }

            document.getElementById("frm").onsubmit = function () {
                // submit 버튼이 데이터를 목적지로 전송하기 전에 개발자가 취하고 싶은 행동을 구현
                let idtext = document.getElementById("idtext");
                let pwtext = document.getElementById("pwtext");
                let pwchtext = document.getElementById("pwchtext");
                let nametext = document.getElementById("nametext");
                let emailtext = document.getElementById("emailtext");
                if(idtext.value =="" || pwtext.value =="" || pwchtext.value =="" ||
                   nametext.value =="" || emailtext.value =="")
                   {
                    alert("모든 칸을 입력해주세요");
                    return false;
                   }
                //아니 에러뜨면 에러뜬다고 알려줘야하는데 그냥 
                // 에러 무시하고 submit 되버리네 ㅋㅋ 이런
                console.log(idregex.test(idtext.value));
                if (!idregex.test(idtext.value)) {
                    
                    alert("잘못된 형태의 아이디 입니다.");
                    return false;
                }
                if (!pwregex.test(pwtext.value)) {
                    
                    alert("잘못된 형태의 비밀번호 입니다.");
                    return false;
                }
                let pwchregex = /[a-zA-Z]/;
                let pwchregex1 = /[\d]/;
                let pwchregex2 = /[\!-\/\:-\@\[-\`\{-\~]/;

				let regexList = [pwchregex, pwchregex1, pwchregex2];

				for(let regex of regexList) {
					if(!regex.test(pwtext.value)) {
						alert("최소 하나이상의 영문, 숫자, 특수문자가 들어가야 합니다.");
						return false;
					}
				}
                // if(!pwchregex.test(pwtext.value))
                // {
                //     alert("최소 하나의 영문이 들어가야 합니다.");
                //     return false;
                // }
                // if(!pwchregex1.test(pwtext.value))
                // {
                //     alert("최소 하나의 숫자가 들어가야 합니다.");
                //     return false;
                // }
                // if(!pwchregex2.test(pwtext.value))
                // {
                //     alert("최소 하나의 특수문자가 들어가야 합니다.");
                //     return false;
                // }
                if (pwtext.value!=pwchtext.value) {
                    alert("비밀번호가 일치하지 않습니다.");
                    return false;
                }
                if (!nameregex.test(nametext.value)) {
                    
                    alert("잘못된 형태의 이름 입니다.");
                    return false;
                }
                if (!emailregex.test(emailtext.value)) {
                    
                    alert("잘못된 형태의 이메일 입니다.");
                    return false;
                }
                return true;
            }

        </script>
</body>

</html>